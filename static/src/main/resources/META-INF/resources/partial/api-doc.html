<div class="container main">
    <div class="row">
        <div class="col col-md-8">
            <h1>API</h1>
            <ul class="nav nav-tabs">
                <li role="presentation" class="active"><a href="#/api/doc">API Documentation</a></li>
                <li role="presentation"><a href="#/api/test">Send-API Tester</a></li>
            </ul>
            
            <h2>1. Sending messages</h2>
            <p>You can either use the SOAP web service API or the REST API for sending messages through Tubewarder. Both provide exactly the same functionality.</p>
            
            <h3>1.1 SOAP API</h3>
            <p>Endpoint: /ws/send</p>
            <p>WSDL: <a href="/ws/send?wsdl" target="_blank">/ws/send?wsdl</a></p>
            <p>Request method: POST</p>
            <p>Request format: SOAP-XML (application/soap+xml)</p>
            <p>Response format: SOAP-XML (application/soap+xml)</p>
            
            <h3>1.2 REST API</h3>
            <p>Endpoint: /rs/send</p>
            <p>Request method: POST</p>
            <p>Request format: JSON (application/json)</p>
            <p>Response format: JSON (application/json)</p>
            
            <div class="panel panel-default">
                <div class="panel-heading">Example request</div>
                <div class="panel-body">
                    <code>
{<br />
&nbsp;&nbsp;&nbsp;"token": "00000000-0000-0000-0000-000000000000",<br />
&nbsp;&nbsp;&nbsp;"keyword": "DOI",<br />
&nbsp;&nbsp;&nbsp;"details": "",<br />
&nbsp;&nbsp;&nbsp;"echo": true,<br />
&nbsp;&nbsp;&nbsp;"template": "DOI",<br />
&nbsp;&nbsp;&nbsp;"channel": "sms",<br />
&nbsp;&nbsp;&nbsp;"recipient": {<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"name": "Unknown",<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"address": "+49000000000000"<br />
&nbsp;&nbsp;&nbsp;},<br />
&nbsp;&nbsp;&nbsp;"model": [<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{"key": "firstname", "value": "John"},<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{"key": "lastname", "value": "Doe"},<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{"key": "code", "value": "1234567890"},<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{"key": "includeDisclaimer", "value": false}<br />
&nbsp;&nbsp;&nbsp;],<br />
&nbsp;&nbsp;&nbsp;"attachments": [<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"filename": "Terms.pdf",<br /> 
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"contentType": "application/pdf",<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"payload": "..."<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br />
&nbsp;&nbsp;&nbsp;]<br />
}
                    </code>
                </div>
            </div>
            <div class="panel panel-default">
                <div class="panel-heading">Request schema</div>
                <div class="panel-body">
                    <code>
Request {<br />
&nbsp;&nbsp;&nbsp;&nbsp;token (string, required - your client app's token)<br />
&nbsp;&nbsp;&nbsp;&nbsp;keyword (string, optional - a keyword for controlling purposes in logging)<br />
&nbsp;&nbsp;&nbsp;&nbsp;details (string, optional - additional details for controlling purposes)<br />
&nbsp;&nbsp;&nbsp;&nbsp;echo (bool, optional - if true, rendered subject and content will be returned)<br />
&nbsp;&nbsp;&nbsp;&nbsp;template (string, required - the template's name)<br />
&nbsp;&nbsp;&nbsp;&nbsp;channel (string, required - the channel's name)<br />
&nbsp;&nbsp;&nbsp;&nbsp;recipient (Address, required - the recipient's address)<br />
&nbsp;&nbsp;&nbsp;&nbsp;model (array of Model, optional - a key-value-list of template parameters)<br />
&nbsp;&nbsp;&nbsp;&nbsp;attachments (array of Attachment, optional - a key-value-list of template parameters)<br />
}<br />
Address {<br />
&nbsp;&nbsp;&nbsp;&nbsp;name (string, optional - recipient's name)<br />
&nbsp;&nbsp;&nbsp;&nbsp;address (string, required - recipient's address (email, number, ...))<br />
}<br />
Model {<br />
&nbsp;&nbsp;&nbsp;&nbsp;key (string, required - template parameter name)<br />
&nbsp;&nbsp;&nbsp;&nbsp;value (string, optional - template parameter value)<br />
}<br />
Attachment {<br />
&nbsp;&nbsp;&nbsp;&nbsp;filename (string, required - filename)<br />
&nbsp;&nbsp;&nbsp;&nbsp;contentType (string, optional - file's mime type')<br />
&nbsp;&nbsp;&nbsp;&nbsp;payload (string, required - Base64 encoded file content)<br />
}
                    </code>
                </div>
            </div>
            <div class="panel panel-default">
                <div class="panel-heading">Example response</div>
                <div class="panel-body">
                    <code>
{<br />
&nbsp;&nbsp;&nbsp;"error": 0,<br />
&nbsp;&nbsp;&nbsp;"subject": "Hi John, thanks for signing up!",<br />
&nbsp;&nbsp;&nbsp;"content": "Dear John Doe, here's your activation code: 1234567890"<br />
}
                    </code>
                </div>
            </div>
            <div class="panel panel-default">
                <div class="panel-heading">Response schema</div>
                <div class="panel-body">
                    <code>
Response {<br />
&nbsp;&nbsp;&nbsp;&nbsp;error (int - error code, see below)<br />
&nbsp;&nbsp;&nbsp;&nbsp;subject (string, included if echo=true - the rendered subject)<br />
&nbsp;&nbsp;&nbsp;&nbsp;content (string, included if echo=true - the rendered content)<br />
}
                    </code>
                </div>
            </div>
            <div class="panel panel-default">
                <div class="panel-heading">Error Codes</div>
                <div class="panel-body">
                    <p>0: OK</p>
                    <p>1: INVALID_INPUT_PARAMETERS</p>
                    <p>2: OBJECT_LOOKUP_ERROR</p>
                    <p>3: PERMISSION_DENIED</p>
                    <p>4: AUTH_REQUIRED</p>
                    <p>5: TEMPLATE_CORRUPT</p>
                    <p>6: MISSING_MODEL_PARAMETER</p>
                </div>
            </div>
        </div>
    </div>
</div>
